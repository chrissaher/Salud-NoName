<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Medicamento </title>
    
      <!--Import Google Icon Font-->
      <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
      <link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
    
      <!--Import materialize.css-->
      <link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>
      <link type="text/css" rel="stylesheet" href="css/hola.css" />
    
       <script src="js/jquery-3.3.1.min.js" type="text/javascript"></script>

        <script type="text/javascript" src="js/materialize.js"></script>    
        <script type="text/javascript" src="js/hola.js"></script> 
    
</head>

<body class="yellow lighten-5">
    
  <nav>
    <div class="nav-wrapper colorFondoLogo">
      <a href="#" data-activates="mobile-demo" class="button-collapse show-on-large AppName">  <img src="img/hamburguesita.png" class="responsive-img hamburguesita">  </a>  <span class="white-text flow-text" > Cosmo App </span>
      <ul class="side-nav colorFondoLogo darken-2" id="mobile-demo">

        <li class="sidenav-header colorFondoW2">
          <ul>
            <div class="user-view">
              <div class="background">
                <div class="parallax"><img src="img/pills.jpg"></div>
              </div>
              <li>
                <img src="img/avatar1.png" alt="" class="logoMenu">
                <span class="flow-text">Lourdes</span>
              </li>  
            </div>
          </ul> 
          <div class="divider"></div>
        </li>

        <li class="colorFondoLogo">
          <ul class="collapsible collapsible-accordion">
            <li>
              <a class="white-text " href="index.html">  
                <img src="img/inbox.png" alt="" class="responsive-img iconsitomenu">
                <span class="flow-text">Inicio</span>
              </a>
            </li>

            <li>
              <a class="white-text " href="perfil.html"> 
                <img src="img/heart.png" alt="" class="responsive-img iconsitomenu">
                <span class="flow-text">Perfil</span>
              </a>
            </li>

            <li>
              <a class="white-text " href="diario.html">  
                <img src="img/copy.png" alt="" class="responsive-img iconsitomenu">
                <span class="flow-text">Diario</span>
              </a>
            </li>

            <li>
              <a class="white-text " href="medicamento.html">  
                <img src="img/medicine2.png" alt="" class="responsive-img iconsitomenu">
                <span class="flow-text">Medicina</span>
              </a>
            </li>

            <li>
              <a class="white-text " href="citas.html">  
                <img src="img/med.png" alt="" class="responsive-img iconsitomenu">
                <span class="flow-text">Cita Medica</span>
              </a>
            </li>

            <li>
              <a class="white-text " href="recarga.html">  
                <img src="img/medicine.png" alt="" class="responsive-img iconsitomenu">
                <span class="flow-text">Recarga</span>
              </a>
            </li>

            <li>
              <a id="boton-logout" class="white-text " href="login.html">
                <img src="img/logout.png" alt="" class="responsive-img iconsitomenu">
                <span class="flow-text">Log Out</span>
              </a>
            </li>
          </ul>
        </li>
      </ul>
    </div>
  </nav>


    
   <div class="container valign longdef">  
       
        <div class="row longdef">  
            
            <div class="col s12">             

                    <h4 class="colorLogo light">  <img class="iconsito50" src="img/medicine4.png">  Medicamentos </h4>
                 
                   
                            <!--span class="flow-text">Medicina: </span-->
                <form id="registrarRecordatorioMedicina" >
                
                                <div class="row">
                                 <div class="input-field col s12">
                                    <select id="namemedicina" >
                                    </select>
                                  </div>
                                </div>
                
                
                                <div class="row">
                                    <div class="input-field col s12">
                                        <label for="fecInicio">Fecha Inicio: </label>
                                        <input id="fecInicio" type="time" name="Fecha Fin" class="datepicker">
                                    </div>
                                </div>
                
                
                                <div class="row">
                                    <div class="input-field col s12">
                                        <label for="fecFin">Fecha Fin: </label>
                                        <input id="fecFin" type="time" name="Fecha Fin" class="datepicker">
                                    </div>
                                </div>
                
                
                                
                                 <span class="flow-text">Intervalo</span>  
                                  <div class="row center ">

                                        <div id="recurrencia" class="row halign center">
                                            
                                              <label class="white">
                                                  <input type="radio" name="cantdosis" value="1">
                                                  <span>1 dosis</span>
                                              </label>
                                              <label class="white">
                                                  <input type="radio" name="cantdosis" value="2">
                                                  <span>2 dosis</span>
                                              </label>
                                              <label class="white">
                                                  <input type="radio" name="cantdosis" value="3">
                                                  <span>3 dosis</span>
                                              </label>
                                              <label class="white">
                                                  <input type="radio" name="cantdosis" value="4">
                                                  <span>4 dosis</span>
                                              </label>
                                              <label class="white">
                                                  <input type="radio" name="cantdosis" value="5">
                                                  <span>5 dosis</span>
                                              </label>
                                              <label class="white">
                                                  <input type="radio" name="cantdosis" value="6">
                                                  <span>6 dosis</span>
                                              </label>
                                        </div>                                      
                                  </div>
     
                
                                <div class="row timeRec" id="DivRecurrencia1">
                                    <div class="input-field col s12">
                                        <label for="primeraHora">Hora (Primera Dosis)</label>
                                        <input id="primeraHora" class="timepicker" type="time">
                                    </div>
                                </div>

                                <div class="row timeRec" id="DivRecurrencia2">
                                    <div class="input-field col s12">
                                        <label for="segHora">Hora (Segunda Dosis)</label>
                                        <input id="segHora" class="timepicker" type="time">
                                    </div>
                                </div>
                
                                <div class="row timeRec" id="DivRecurrencia3">
                                    <div class="input-field col s12">
                                        <label for="terceraHora">Hora (Tercera Dosis)</label>
                                        <input id="terceraHora" class="timepicker" type="time">
                                    </div>
                                </div>
                
                                <div class="row timeRec" id="DivRecurrencia4">
                                    <div class="input-field col s12">
                                        <label for="cuartaHora">Hora (Cuarta Dosis)</label>
                                        <input id="cuartaHora" class="timepicker" type="time">
                                    </div>
                                </div>
                
                                <div class="row timeRec" id="DivRecurrencia5">
                                    <div class="input-field col s12">
                                        <label for="quintaHora">Hora (Quinta Dosis)</label>
                                        <input id="quintaHora" class="timepicker" type="time">
                                    </div>
                                </div>
                
                                <div class="row timeRec" id="DivRecurrencia6" >
                                    <div class="input-field col s12">
                                        <label for="sextaHora">Hora (Sexta Dosis)</label>
                                        <input id="sextaHora" class="timepicker" type="time">
                                    </div>
                                </div>
								
						<div class="row right">
                            <div class="input-field col s6">  </div>
                             <button form="registrarRecordatorioMedicina" class="btn waves-effect waves-light colorFondoLogo" type="submit" name="action">Solicitar
                                    <i class="material-icons right">send</i>
                             </button>
                           
                            <!--a href="#misprestamos" class="waves-effect waves-light btn colorFondoLogo btnmedidaini">Solicitar</a-->
                       </div>
                </form>
                
                       
                
                
            </div>    
        </div>
       

                            
       <!-- --> 
       

       
       <!-- --> 
     
    </div>
    
    
<!-- LISTAR MEDICINAS -->
  <script type="text/javascript">
	$('select').on('contentChanged', function() {
		$(this).formSelect();
	});
	
    $(document).ready(function() {
	  var idUsuario = 1;
	  
	  <!-- LISTAR MEDICINAS -->
      var data = {
        type:"GET",
        url: "http://salud-noname.herokuapp.com/medicinas",
        contentType: "application/json; charset=utf-8",
        dataType: "json"
      };
      $.ajax(data).then(function(data) {
        var medicinas = '<option value="" selected disabled>Medicina</option>';

        $.each(data, function (i, item) {
          medicinas += '<option value="' +
			item.id + '">' + item.nombre + '</option>';
        });
        $('#namemedicina').html(medicinas);
		$('select').material_select();
      });
	  
	  $("#registrarRecordatorioMedicina").submit(function(event) {
			console.log("ola k ase");
			event.preventDefault(event);
			
			var medId = $('#namemedicina').val();
			var medText = $('#namemedicina option:selected').text()
			var sDate = $('#fecInicio').val();
			var eDate = $('#fecFin').val();
			var n = $("input[name='cantdosis']:checked", "#recurrencia").val();
			  
			var d1 = (n >= 1 ? $('#primeraHora').val() : '');
			var d2 = (n >= 2 ? $('#segHora').val() : '');
			var d3 = (n >= 3 ? $('#terceraHora').val() : '');
			var d4 = (n >= 4 ? $('#cuartaHora').val() : '');
			var d5 = (n >= 5 ? $('#quintaHora').val() : '');
			var d6 = (n >= 6 ? $('#sextaHora').val() : '');
			  
			console.log(medText);
			console.log(sDate);
			console.log(n);
			console.log(d1);
			console.log(d2);
			console.log(d3);
			console.log(d4);
			console.log(d5);
			console.log(d6);
			var recordatorioData = {
				"descripcion": medText,
				"dosis1": d1,
				"dosis2": d2,
				"dosis3": d3,
				"dosis4": d4,
				"dosis5": d5,
				"dosis6": d6,
				"fechaFin": eDate,
				"fechaInicio": sDate,
				"medicina": {
					"id": medId
				},
				"paciente": {
					"id": idUsuario
				}
			};
			 
			console.log(JSON.stringify(recordatorioData));
			$.ajax({
				type: "POST",
				url: "http://salud-noname.herokuapp.com/recordatorios",
				data: JSON.stringify(recordatorioData),
				contentType: "application/json; charset=utf-8",
				dataType: "json",
				processData: true,
				success: function (data, status, jqXHR) {
					//alert("success..." + data);
					M.toast({html: 'Se agreg√≥ correctamente!'})
				},
				error: function (xhr) {
					alert(xhr.responseText);
				}
			});
		});
	});
    </script>
    
</body>

</html>
    